"use strict";(self.webpackChunkloopback_blog=self.webpackChunkloopback_blog||[]).push([[7099],{3905:(e,t,o)=>{o.d(t,{Zo:()=>u,kt:()=>h});var n=o(7294);function a(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function i(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function r(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?i(Object(o),!0).forEach((function(t){a(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function l(e,t){if(null==e)return{};var o,n,a=function(e,t){if(null==e)return{};var o,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)o=i[n],t.indexOf(o)>=0||(a[o]=e[o]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)o=i[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(a[o]=e[o])}return a}var p=n.createContext({}),s=function(e){var t=n.useContext(p),o=t;return e&&(o="function"==typeof e?e(t):r(r({},t),e)),o},u=function(e){var t=s(e.components);return n.createElement(p.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var o=e.components,a=e.mdxType,i=e.originalType,p=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),c=s(o),m=a,h=c["".concat(p,".").concat(m)]||c[m]||d[m]||i;return o?n.createElement(h,r(r({ref:t},u),{},{components:o})):n.createElement(h,r({ref:t},u))}));function h(e,t){var o=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=o.length,r=new Array(i);r[0]=m;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[c]="string"==typeof e?e:a,r[1]=l;for(var s=2;s<i;s++)r[s]=o[s];return n.createElement.apply(null,r)}return n.createElement.apply(null,o)}m.displayName="MDXCreateElement"},4440:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>p,contentTitle:()=>r,default:()=>d,frontMatter:()=>i,metadata:()=>l,toc:()=>s});var n=o(7462),a=(o(7294),o(3905));const i={title:"LoopBack 4 January 2019 Milestone Update",date:new Date("2019-02-06T00:00:00.000Z"),authors:"b-admike",slug:"january-2019-milestone",tags:["Milestone update"]},r=void 0,l={permalink:"/blog/january-2019-milestone",editUrl:"https://github.com/loopbackio/loopback-blog/blog/2019/2019-02-06-january-milestone.md",source:"@site/blog/2019/2019-02-06-january-milestone.md",title:"LoopBack 4 January 2019 Milestone Update",description:"Originally published on strongloop.com",date:"2019-02-06T00:00:00.000Z",formattedDate:"February 6, 2019",tags:[{label:"Milestone update",permalink:"/blog/tags/milestone-update"}],readingTime:6.265,hasTruncateMarker:!0,authors:[{name:"Biniam Admikew",title:"LoopBack Maintainer",url:"https://github.com/b-admike",imageURL:"https://avatars.githubusercontent.com/u/13950637",key:"b-admike"}],frontMatter:{title:"LoopBack 4 January 2019 Milestone Update",date:"2019-02-06T00:00:00.000Z",authors:"b-admike",slug:"january-2019-milestone",tags:["Milestone update"]},prevItem:{title:"New Developer Page - Create Dynamic End-to-End REST APIs with LoopBack 4",permalink:"/blog/create-dynamic-end-to-end-REST-APIs-with-loopback4"},nextItem:{title:"Meetup - Quickly Build APIs with Existing Services and Data Using LoopBack!",permalink:"/blog/meetup-quickly-build-apis-using-loopback"}},p={authorsImageUrls:[void 0]},s=[{value:"Authentication Epic",id:"authentication-epic",level:2},{value:"User Adoption",id:"user-adoption",level:2},{value:"Extensibility",id:"extensibility",level:2},{value:"Documentation updates",id:"documentation-updates",level:2},{value:"LoopBack v3 compatibility layer",id:"loopback-v3-compatibility-layer",level:2},{value:"Community Engagement Events",id:"community-engagement-events",level:2},{value:"Toronto LoopBack Meetup",id:"toronto-loopback-meetup",level:3},{value:"Welcome New Core Maintainer",id:"welcome-new-core-maintainer",level:2},{value:"Call to Action",id:"call-to-action",level:2}],u={toc:s},c="wrapper";function d(e){let{components:t,...o}=e;return(0,a.kt)(c,(0,n.Z)({},u,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,(0,a.kt)("em",{parentName:"p"},"Originally published on ",(0,a.kt)("a",{parentName:"em",href:"https://strongloop.com"},"strongloop.com"))),(0,a.kt)("p",null,"We're one month into the new year! While the team had some time off extending into January, we still managed to work and spike on authentication, migration from LB3, user adoption, extensibility, and documentation. Read more to find out how it all unfolded."),(0,a.kt)("h2",{id:"authentication-epic"},"Authentication Epic"),(0,a.kt)("p",null,"Last month we implemented the strategy resolver, JWT strategy class and authentication action and created the diagram that depicts their dependency relations. Based on those efforts, in January we enriched the ",(0,a.kt)("inlineCode",{parentName:"p"},"loopback4-example-shopping")," repository with a working JWT authentication system, and added two endpoints for model ",(0,a.kt)("inlineCode",{parentName:"p"},"User")," to make use of it:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"POST /Users/login")," verify a user's credentials and return a valid JWT access token"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"GET /Users/me")," display the logged in user of the application")),(0,a.kt)("p",null,"The following picture describes how the authentication mechanism works:"),(0,a.kt)("img",{src:"https://strongloop.com/blog-assets/2019/01/auth_endpoints.png",alt:"authentication endpoints in the example"}),(0,a.kt)("p",null,"This month our discussion focused on dividing the responsibilities among controller, repository and services/utilities. "),(0,a.kt)("p",null,"The login related logic should be extracted into a service which could be shared among different clients, like REST, gRPC and WebSocket. Those logic include taking in credentials, verifying users, generating and decoding access token. The login service receives User's repository via DI. As the first implementation, we simply keep them as utils. They will be refactored into service in story ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/strongloop/loopback4-example-shopping/issues/40"},"Refactor authentication util functions into a service")),(0,a.kt)("p",null,"The controller function should extract credentials like email, username and password from the request. And calls the service to perform login. The service is injected via DI. "),(0,a.kt)("p",null,"We also discovered there are three extension points that are needed in order to make LoopBack's authentication system more flexible. We need extension points such as:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"plugin Passport based strategies leveraging the existing auth action in ",(0,a.kt)("a",{parentName:"li",href:"https://github.com/strongloop/loopback-next/blob/master/packages/authentication/src/providers/authentication.provider.ts"},(0,a.kt)("inlineCode",{parentName:"a"},"@loopback/authentication")),"."),(0,a.kt)("li",{parentName:"ul"},"plugin non-passport based strategies like the JWT strategy created by us."),(0,a.kt)("li",{parentName:"ul"},"a more flexible user profile type that allow people return custom properties.")),(0,a.kt)("p",null,"PR ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/strongloop/loopback-next/pull/2249"},"https://github.com/strongloop/loopback-next/pull/2249")," illustrates extension point/extension pattern is in progress. It provides a standard to make extension point that the 3 above stories could follow."),(0,a.kt)("p",null,"A more detailed tutorial will be created after finishing the story ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/strongloop/loopback4-example-shopping/issues/40"},"Refactor authentication util functions into a service"),"."),(0,a.kt)("h2",{id:"user-adoption"},"User Adoption"),(0,a.kt)("p",null,"In order to cater to users developing LoopBack applications with JavaScript, ",(0,a.kt)("a",{parentName:"p",href:"https://strongloop.com/authors/Hage_Yaapa/"},"Yaapa")," conducted a spike on how to get a LoopBack 4 JavaScript application up and running in ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/strongloop/loopback-next/issues/1978"},"#1978"),"."),(0,a.kt)("p",null,"You can checkout the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/strongloop/loopback4-example-javascript/tree/hack"},"hack")," branch of ",(0,a.kt)("inlineCode",{parentName:"p"},"loopback4-example-javascript")," and preview the progress and the possible JavaScript API for LoopBack 4. It is a working example, feel free to experiment."),(0,a.kt)("p",null,"Also, in ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/strongloop/loopback.io/pull/795"},"PR #795"),", ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/nabdelgadir"},"Nora")," improved the UX for users on ",(0,a.kt)("inlineCode",{parentName:"p"},"loopback.io")," by setting up redirects for the current LoopBack 4 website and LoopBack 3 in Active LTS, akin to how Node.js has the split for the different version downloads in their main landing page."),(0,a.kt)("h2",{id:"extensibility"},"Extensibility"),(0,a.kt)("p",null,"We continue to refine our extensibility story as we build more extensions."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/strongloop/loopback-next/pull/2289"},"2289"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Introduced ",(0,a.kt)("inlineCode",{parentName:"li"},"BindingFilter")," to match multiple bindings using a function."),(0,a.kt)("li",{parentName:"ul"},"Refactored code to use it for Context APIs such as ",(0,a.kt)("inlineCode",{parentName:"li"},"find")," and ",(0,a.kt)("inlineCode",{parentName:"li"},"findByTag"),"."),(0,a.kt)("li",{parentName:"ul"},"Exposed ",(0,a.kt)("inlineCode",{parentName:"li"},"filterByKey")," and ",(0,a.kt)("inlineCode",{parentName:"li"},"filterByTag")," utility functions.")))),(0,a.kt)("p",null,"To make it easy to implement the extension point/extension pattern, we're building up new features for ",(0,a.kt)("inlineCode",{parentName:"p"},"@loopback/context"),". There are number of PRs under review."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",{parentName:"p",href:"https://github.com/strongloop/loopback-next/pull/2291"},"PR#2291")),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Add support for ",(0,a.kt)("inlineCode",{parentName:"li"},"context")," to emit ",(0,a.kt)("inlineCode",{parentName:"li"},"bind")," and ",(0,a.kt)("inlineCode",{parentName:"li"},"unbind")," events"),(0,a.kt)("li",{parentName:"ul"},"Allow observers to register with the context chain and respond to come and go of bindings of interest"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",{parentName:"p",href:"https://github.com/strongloop/loopback-next/pull/2122"},"PR#2122")," (depends on #2291)"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Introduce ",(0,a.kt)("inlineCode",{parentName:"li"},"ContextView")," to dynamically resolve values of matching bindings"),(0,a.kt)("li",{parentName:"ul"},"Introduce ",(0,a.kt)("inlineCode",{parentName:"li"},"@inject.view")," to support dependency injection of multiple bound values"),(0,a.kt)("li",{parentName:"ul"},"Extend ",(0,a.kt)("inlineCode",{parentName:"li"},"@inject")," and ",(0,a.kt)("inlineCode",{parentName:"li"},"@inject.getter")," to support multiple bound values"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",{parentName:"p",href:"https://github.com/strongloop/loopback-next/pull/2249"},"PR#2249")),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Add an example package to illustrate how to implement extension point/extension pattern using LoopBack 4's IoC and DI container"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",{parentName:"p",href:"https://github.com/strongloop/loopback-next/pull/2259"},"PR#2259")),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Propose new APIs for ",(0,a.kt)("inlineCode",{parentName:"li"},"Context")," to configure bindings"),(0,a.kt)("li",{parentName:"ul"},"Add ",(0,a.kt)("inlineCode",{parentName:"li"},"@inject.config")," to simplify injection of configuration")))),(0,a.kt)("p",null,"You are welcome to join our discussions in these pull requests. Please be aware that such PRs can be changed or abandoned during the review process."),(0,a.kt)("h2",{id:"documentation-updates"},"Documentation updates"),(0,a.kt)("p",null,"We're always striving to have better documentation for our users. In ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/strongloop/loopback-next/pull/2214"},"PR#2214"),", ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/nabdelgadir"},"Nora")," added much needed descriptions to our ",(0,a.kt)("a",{parentName:"p",href:"https://loopback.io/doc/en/lb4/Decorators_repository.html#relation-decorators"},"relation decorators")," page with clear examples on how they are applied. Moreover, ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/emonddr"},"Dominique")," wrote an excellent guide on how to publish a LoopBack 4 application to Kubernetes on IBM Cloud in ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/strongloop/loopback-next/pull/2160"},"PR#2160"),". Check it out ",(0,a.kt)("a",{parentName:"p",href:"https://loopback.io/doc/en/lb4/deploying_to_ibm_cloud_kubernetes.html"},"here"),"."),(0,a.kt)("h2",{id:"loopback-v3-compatibility-layer"},"LoopBack v3 compatibility layer"),(0,a.kt)("p",null,"In January, Miroslav implemented a proof of concept showing a compatibility layer that would allow application developers to take their model files (",(0,a.kt)("inlineCode",{parentName:"p"},".json")," and ",(0,a.kt)("inlineCode",{parentName:"p"},".js"),") from an existing LB3 project and drop them mostly as-is to a LB4 application."),(0,a.kt)("p",null,"The idea is to simplify the migration path from LB3 to LB4 by allowing developers to update their existing applications from LB3 to LB4 runtime (and dependencies) without having to rework their source code to the new programming model yet."),(0,a.kt)("p",null,'With the proposed compatibility layer, LB3 models are "upgraded" to use:'),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"loopback-datasource-juggler")," version 4.x (instead of 3.x)"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"@loopback/rest")," for REST APIs (instead of ",(0,a.kt)("inlineCode",{parentName:"li"},"strong-remoting"),")"),(0,a.kt)("li",{parentName:"ul"},"OpenAPI v3 (instead of Swagger a.k.a. OpenAPI v2)"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"@loopback/rest-explorer")," for API Explorer (instead of ",(0,a.kt)("inlineCode",{parentName:"li"},"loopback-component-explorer"),")")),(0,a.kt)("p",null,"The migrated models will run fully on LB4 runtime and thus enjoy longer LTS."),(0,a.kt)("p",null,"If you have an LB3 application and considering upgrading to LB4, then please join the discussion in ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/strongloop/loopback-next/pull/2274"},"PR#2274"),". Your feedback is very important to us!"),(0,a.kt)("p",null,"While waiting for more feedback from our users, Miroslav reviewed early input and started to look into ways to mount an entire LB3 application inside an LB4 project. While such solution still depends on LB3 runtime that will eventually go out of support, it will provide almost 100% backwards compatibility and require very little code changes. Let us know if this option would be useful for your project and leave a comment in ","[PR#2318]","strongloop/loopback-next#2318)."),(0,a.kt)("h2",{id:"community-engagement-events"},"Community Engagement Events"),(0,a.kt)("h3",{id:"toronto-loopback-meetup"},"Toronto LoopBack Meetup"),(0,a.kt)("p",null,"The LoopBack team hosted a meetup in downtown Toronto on February 5th, 2019. We taught users all about LoopBack 4 and demonstrated the capabilities and integrations of the framework. We worked hard to prepare presentations and demos for the meetup during this month. If you are in the Toronto area and are interested in future meetups, check out the ",(0,a.kt)("a",{parentName:"p",href:"https://www.meetup.com/Toronto-Cloud-Integration-Meetup/"},"Toronto Cloud Integration Meetup Group")," and make sure to sign up!"),(0,a.kt)("p",null,"February is an event-filled month. Besides the meetup in Toronto, there will be LoopBack coverage at ",(0,a.kt)("a",{parentName:"p",href:"https://www.ibm.com/events/think/code/"},"Code @ Think")," in Node.js Master Class and as one of the Quick Labs. ",(0,a.kt)("a",{parentName:"p",href:"https://strongloop.com/authors/Raymond_Feng/"},"Raymond")," will be presenting at DeveloperWeek on Feb 21 on the topic -- ",(0,a.kt)("a",{parentName:"p",href:"https://sched.co/JXDc"},"Speed and Scale: Building APIs with Node.js, TypeScript and LoopBack"),". "),(0,a.kt)("p",null,"Twitter is a great way to stay in the loop with StrongLoop and LoopBack news. The best way to learn about events we are part of is generally ",(0,a.kt)("a",{parentName:"p",href:"https://strongloop.com/events/"},"https://strongloop.com/events/"),"."),(0,a.kt)("h2",{id:"welcome-new-core-maintainer"},"Welcome New Core Maintainer"),(0,a.kt)("p",null,"We'd like to introduce our new LoopBack development team member ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/emonddr"},"Dominique")," at our Markham lab. Dominique brings lots of experience and knowledge from working in Message Broker and App Connect development team in the past. He has already given us a step-by-step tutorial on how to deploy a LoopBack 4 application to Kubernetes in IBM Cloud ",(0,a.kt)("a",{parentName:"p",href:"https://loopback.io/doc/en/lb4/deploying_to_ibm_cloud_kubernetes.html"},"here"),". Welcome, Dominique!"),(0,a.kt)("h2",{id:"call-to-action"},"Call to Action"),(0,a.kt)("p",null,"LoopBack's future success depends on you. We appreciate your continuous support and engagement to make LoopBack even better and meaningful for your API creation experience. Please join us and help the project by:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/strongloop/loopback-next/issues"},"Reporting issues"),"."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/strongloop/loopback-next/blob/master/docs/CONTRIBUTING.md"},"Contributing"),"\ncode and documentation."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/strongloop/loopback-next/labels/good%20first%20issue"},'Opening a pull request on one of our "good first issues"'),"."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/strongloop/loopback-next/issues/110"},"Joining")," our user group.")))}d.isMDXComponent=!0}}]);